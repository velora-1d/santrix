/* ============================================
   MOBILE-FIRST RESPONSIVE CSS
   Based on reference design screenshot
   ============================================ */

/* ========================================
   MOBILE (< 768px)
   Match reference: Clean, spacious, readable
   ======================================== */

@media (max-width: 768px) {

    /* ========== BASE LAYOUT ========== */

    body {
        font-size: 14px;
        line-height: 1.5;
    }

    .main-content,
    main {
        padding: 8px 8px 32px 8px !important;
        background: #f5f5f7 !important;
    }

    /* Content area - minimal side padding */
    .main-content>div[style*="padding"] {
        padding-left: 8px !important;
        padding-right: 8px !important;
    }

    /* Hide bottom navigation - use hamburger menu instead */
    .mobile-bottom-nav {
        display: none !important;
    }

    /* ========== PAGE HEADER ========== */
    /* Unified header bar per wireframe: [Menu] [Title] [Notif] [Avatar] */

    .page-header {
        display: flex !important;
        align-items: center !important;
        padding: 8px 12px !important;
        margin: 8px !important;
        background: white !important;
        border-radius: 12px !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
        overflow: visible !important;
        gap: 10px !important;
    }

    /* Header Hamburger Button (inside header) */
    .header-hamburger {
        display: flex !important;
        align-items: center;
        justify-content: center;
        width: 40px !important;
        height: 40px !important;
        min-width: 40px !important;
        min-height: 40px !important;
        background: #f1f5f9 !important;
        border: 1px solid #e2e8f0 !important;
        border-radius: 10px !important;
        cursor: pointer;
        flex-shrink: 0 !important;
    }

    .header-hamburger i {
        color: #475569 !important;
        width: 20px !important;
        height: 20px !important;
    }

    /* Page Title - in subtle box */
    .page-title {
        flex: 1 !important;
        font-size: 13px !important;
        font-weight: 600 !important;
        margin: 0 !important;
        padding: 8px 12px !important;
        background: #f8fafc !important;
        border-radius: 8px !important;
        color: #1f2937 !important;
        text-align: center !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }

    /* Header Actions - notification and avatar */
    .page-header-actions {
        gap: 8px !important;
        flex-shrink: 0 !important;
    }

    .page-header-actions>div:not(:last-child):not(.notification-bell) {
        display: none !important;
    }

    /* Notification bell */
    .notification-bell>div {
        width: 40px !important;
        height: 40px !important;
        min-width: 40px !important;
        min-height: 40px !important;
        background: #f1f5f9 !important;
        border: 1px solid #e2e8f0 !important;
        box-shadow: none !important;
    }

    .notification-bell>div i {
        color: #475569 !important;
    }

    /* Avatar - prevent overflow */
    .page-header-actions>div:last-child {
        padding-left: 0 !important;
        border-left: none !important;
        flex-shrink: 0 !important;
    }

    .page-header-actions>div:last-child>div {
        width: 40px !important;
        height: 40px !important;
        min-width: 40px !important;
        min-height: 40px !important;
        aspect-ratio: 1 / 1 !important;
        font-size: 14px !important;
        flex-shrink: 0 !important;
        border-radius: 50% !important;
    }

    /* Hide the old fixed hamburger button */
    .hamburger-btn {
        display: none !important;
    }

    /* ========== GRID SYSTEM ========== */
    /* Reference: 2 columns for most cards */

    /* Default: Stack vertically */
    .grid,
    [class*="grid-cols"] {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
        margin-bottom: 16px !important;
    }

    /* KPI Cards: 2 columns */
    .grid-cols-3,
    .grid-cols-4,
    .grid-cols-6,
    [style*="grid-template-columns: repeat(3"],
    [style*="grid-template-columns: repeat(4"],
    [style*="grid-template-columns: repeat(6"] {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 12px !important;
    }

    /* Module cards: 1 column */
    .grid-cols-2 {
        grid-template-columns: 1fr !important;
    }

    /* Transactions grid: Force single column on mobile */
    .transactions-grid,
    [style*="minmax(400px"] {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 16px !important;
    }

    /* Transaction cards: Compact padding */
    .transactions-grid>div {
        padding: 12px !important;
        overflow: hidden !important;
    }

    /* Transaction table wrapper: Enable horizontal scroll */
    .transactions-grid>div>div[style*="overflow"] {
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
        margin-left: -12px !important;
        margin-right: -12px !important;
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* Transaction tables: Proper sizing */
    .transactions-grid table {
        width: auto !important;
        min-width: 100% !important;
        table-layout: auto !important;
        font-size: 11px !important;
    }

    .transactions-grid th,
    .transactions-grid td {
        padding: 8px 6px !important;
        font-size: 11px !important;
        white-space: nowrap !important;
    }

    .transactions-grid h3 {
        font-size: 0.875rem !important;
        margin-bottom: 10px !important;
    }

    /* ========== CARDS ========== */
    /* Reference: Spacious, rounded, clear */

    /* All cards */
    [style*="border-radius"][style*="padding"],
    .card {
        padding: 16px !important;
        border-radius: 16px !important;
        margin-bottom: 12px !important;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08) !important;
    }

    /* KPI Cards - Match reference size */
    [style*="gradient"] {
        padding: 20px 16px !important;
        border-radius: 16px !important;
        min-height: 120px !important;
    }

    /* Module Cards (Sekretaris, Bendahara, etc) */
    [style*="padding: 28px"],
    [style*="padding: 32px"] {
        padding: 24px !important;
        border-radius: 16px !important;
    }

    /* ========== TYPOGRAPHY ========== */
    /* Reference: Clear hierarchy, readable */

    /* Headings */
    h1 {
        font-size: 24px !important;
        font-weight: 700 !important;
    }

    h2 {
        font-size: 20px !important;
        font-weight: 600 !important;
    }

    h3 {
        font-size: 16px !important;
        font-weight: 600 !important;
    }

    h4 {
        font-size: 14px !important;
        font-weight: 500 !important;
    }

    /* Body text */
    p,
    span,
    div {
        font-size: 14px !important;
        line-height: 1.5 !important;
    }

    /* KPI Numbers - Keep prominent */
    [style*="font-size: 1.75rem"],
    [style*="font-size: 32px"],
    [style*="font-size: 2rem"] {
        font-size: 28px !important;
        font-weight: 700 !important;
        line-height: 1.2 !important;
    }

    /* KPI Labels */
    [style*="font-size: 0.75rem"],
    [style*="font-size: 13px"],
    [style*="text-transform: uppercase"] {
        font-size: 11px !important;
        font-weight: 600 !important;
        letter-spacing: 0.5px !important;
    }

    /* Module card titles */
    [style*="font-size: 1.5rem"] {
        font-size: 18px !important;
        font-weight: 700 !important;
    }

    /* Module card descriptions */
    [style*="font-size: 0.875rem"] {
        font-size: 13px !important;
        opacity: 0.9 !important;
    }

    /* ========== ICONS ========== */
    /* Proportional to cards */

    /* Large icons (module cards) */
    [style*="width: 56px"][style*="height: 56px"],
    [style*="width: 60px"][style*="height: 60px"] {
        width: 48px !important;
        height: 48px !important;
    }

    /* Medium icons (KPI cards) */
    [style*="width: 40px"][style*="height: 40px"],
    [style*="width: 48px"][style*="height: 48px"] {
        width: 40px !important;
        height: 40px !important;
    }

    /* Icon sizes inside */
    [data-feather] {
        width: 20px !important;
        height: 20px !important;
    }

    /* ========== DECORATIVE ELEMENTS ========== */
    /* Keep but smaller */

    [style*="position: absolute"][style*="border-radius: 50%"] {
        width: 60px !important;
        height: 60px !important;
        opacity: 0.5 !important;
    }

    /* ========== FILTERS ========== */
    /* Stack vertically, full width */

    .filter-sticky {
        position: static !important;
        margin-bottom: 16px !important;
        padding: 0 !important;
    }

    /* Filter container */
    [style*="background: linear-gradient"][style*="padding: 24px"] {
        padding: 16px !important;
        border-radius: 16px !important;
    }

    /* Stack filter inputs - except .filter-grid which has custom layout */
    form>div[style*="flex"]:not(.filter-grid),
    form>div[style*="grid"]:not(.filter-grid) {
        display: flex !important;
        flex-direction: column !important;
        gap: 12px !important;
    }

    form>div:not(.filter-grid)>div:not(.filter-buttons) {
        width: 100% !important;
        min-width: 100% !important;
    }

    /* Custom Filter Grid - 2 columns, compact */
    .filter-grid {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 8px !important;
    }

    .filter-grid>div {
        width: 100% !important;
        min-width: unset !important;
    }

    .filter-grid label {
        font-size: 10px !important;
        margin-bottom: 4px !important;
    }

    .filter-buttons {
        grid-column: span 2 !important;
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 8px !important;
    }

    .filter-buttons>button,
    .filter-buttons>a {
        width: 100% !important;
        height: 40px !important;
        min-height: 40px !important;
        padding: 8px 12px !important;
        font-size: 13px !important;
        justify-content: center !important;
        display: flex !important;
        align-items: center !important;
    }

    /* Form inputs - compact */
    form select,
    form input[type="text"],
    form input[type="number"],
    form input[type="date"] {
        height: 38px !important;
        font-size: 13px !important;
        padding: 0 10px !important;
        border-radius: 8px !important;
    }

    /* Form buttons - compact */
    form button {
        padding: 10px !important;
        font-size: 13px !important;
        font-weight: 600 !important;
        border-radius: 8px !important;
        min-height: 40px !important;
    }

    /* FAQ icon - smaller on mobile */
    .help-faq-btn,
    [style*="BANTUAN"] {
        width: 44px !important;
        height: 44px !important;
        font-size: 12px !important;
    }

    .help-faq-btn i,
    .help-faq-btn svg {
        width: 18px !important;
        height: 18px !important;
    }

    /* ========== TABLES ========== */
    /* Horizontal scroll, all data visible */

    /* Table container */
    [style*="border-radius"][style*="padding"] table,
    .table-container,
    div:has(> table) {
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }

    table {
        display: table !important;
        width: max-content !important;
        min-width: 100% !important;
        font-size: 12px !important;
        background: white;
        border-radius: 12px;
    }

    table thead,
    table tbody {
        display: table-header-group;
    }

    table tbody {
        display: table-row-group;
    }

    table th,
    table td {
        padding: 10px 8px !important;
        font-size: 12px !important;
        white-space: nowrap;
    }

    table th {
        font-weight: 600 !important;
        background: #f8f9fa !important;
    }

    /* ========== CHARTS ========== */
    /* Maintain aspect ratio */

    canvas {
        max-height: 220px !important;
        width: 100% !important;
    }

    /* Chart containers */
    [style*="background: white"][style*="padding: 32px"] {
        padding: 20px !important;
        border-radius: 16px !important;
    }

    /* ========== BUTTONS ========== */
    /* Touch-friendly */

    button,
    .btn,
    a[class*="btn"] {
        padding: 12px 16px !important;
        font-size: 14px !important;
        font-weight: 600 !important;
        border-radius: 10px !important;
        min-height: 44px !important;
    }

    /* ========== SPACING ========== */
    /* Consistent, breathable */

    /* Section spacing */
    [style*="margin-bottom: 24px"],
    [style*="margin-bottom: 32px"],
    .mb-6,
    .mb-8 {
        margin-bottom: 16px !important;
    }

    /* Gap spacing */
    [style*="gap: 20px"],
    [style*="gap: 24px"] {
        gap: 12px !important;
    }

    /* ========== SYSTEM INFO SECTION ========== */
    /* Keep visible but compact */

    [style*="background-image: linear-gradient"][style*="border-box"] {
        padding: 20px !important;
        border-radius: 16px !important;
        margin-bottom: 16px !important;
    }
}

/* ========================================
   TABLET (768px - 1024px)
   ======================================== */

@media (min-width: 768px) and (max-width: 1024px) {

    .main-content {
        padding: 20px 24px 24px 24px !important;
    }

    /* 2-column grid for tablets */
    .grid-cols-4,
    .grid-cols-6 {
        grid-template-columns: repeat(3, 1fr) !important;
    }

    .grid-cols-3 {
        grid-template-columns: repeat(2, 1fr) !important;
    }
}

/* ========================================
   SMALL MOBILE (< 480px)
   Extra fixes for very small screens
   ======================================== */

@media (max-width: 480px) {

    /* ========== DASHBOARD CARDS ========== */
    /* Force 1 column on very small screens */

    .grid-cols-3,
    .grid-cols-4,
    .grid-cols-6,
    [style*="grid-template-columns: repeat(3"],
    [style*="grid-template-columns: repeat(4"],
    [style*="grid-template-columns: repeat(6"],
    [style*="grid-template-columns: repeat(2"] {
        grid-template-columns: 1fr !important;
        gap: 10px !important;
    }

    /* KPI Cards - full width, compact */
    [style*="gradient"][style*="border-radius"] {
        padding: 16px !important;
        min-height: auto !important;
    }

    /* KPI Values - readable size */
    [style*="font-size: 1.75rem"],
    [style*="font-size: 32px"],
    [style*="font-size: 2rem"] {
        font-size: 22px !important;
    }

    /* ========== FORM IMPROVEMENTS ========== */

    /* Form grids - 2 columns on mobile */
    form [style*="grid-template-columns"],
    form [style*="display: grid"],
    form>div[style*="grid"],
    div[style*="padding"] form>div[style*="grid"] {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 10px !important;
    }

    form [style*="grid-template-columns"]>div,
    form [style*="display: grid"]>div {
        width: 100% !important;
        margin-bottom: 0 !important;
    }

    /* Filter Santri card - 2 columns */
    [style*="background: linear-gradient"][style*="rgba(16, 185, 129"] [style*="grid-template-columns"] {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 10px !important;
    }

    [style*="background: linear-gradient"][style*="rgba(16, 185, 129"] [style*="grid-template-columns"]>div {
        width: 100% !important;
        margin-bottom: 0 !important;
    }

    /* Submit buttons - full width spanning 2 columns */
    form button[type="submit"] {
        width: 100% !important;
        margin-top: 8px !important;
        grid-column: span 2 !important;
    }

    form [style*="justify-content: flex-end"] {
        justify-content: center !important;
    }

    /* Form elements - COMPACT for 2 column layout */
    form label {
        font-size: 9px !important;
        margin-bottom: 3px !important;
        gap: 4px !important;
        display: flex !important;
        align-items: center !important;
    }

    /* HIDE colored circle icons on mobile */
    form label span[style*="width: 20px"],
    form label span[style*="width: 36px"],
    form label span[style*="background: linear-gradient"] {
        display: none !important;
    }


    /* ALL inputs/selects - SAME SIZE */
    form input,
    form select,
    form textarea {
        font-size: 10px !important;
        padding: 0 8px !important;
        height: 36px !important;
        min-height: 36px !important;
        max-height: 36px !important;
        border-radius: 8px !important;
        box-sizing: border-box !important;
    }

    /* All grid items - equal width */
    form [style*="grid-template-columns"]>div {
        width: 100% !important;
        min-width: 0 !important;
    }

    form button[type="submit"] {
        font-size: 10px !important;
        padding: 0 12px !important;
        height: 36px !important;
    }

    /* All form grids stay 2 columns - no spanning */

    /* Filter Santri card - more compact */
    [style*="rgba(16, 185, 129"] {
        padding: 12px !important;
    }

    [style*="rgba(16, 185, 129"] label {
        font-size: 8px !important;
    }

    [style*="rgba(16, 185, 129"] select {
        font-size: 10px !important;
        padding: 8px 6px !important;
    }

    /* FILTER DATA SYAHRIAH - auto-fit grid fix */
    form [style*="auto-fit"] {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 10px !important;
    }

    /* Filter buttons row - span full width */
    form [style*="auto-fit"]>div:has(button),
    form [style*="auto-fit"]>div[style*="display: flex"] {
        grid-column: span 2 !important;
    }

    /* Filter buttons - proper layout */
    form [style*="auto-fit"] div[style*="display: flex"] {
        display: flex !important;
        gap: 8px !important;
    }

    form [style*="auto-fit"] button[type="submit"] {
        flex: 1 !important;
        height: 36px !important;
        font-size: 11px !important;
    }

    form [style*="auto-fit"] a[style*="height: 46px"] {
        width: 36px !important;
        height: 36px !important;
    }

    /* Filter header */
    form>div[style*="display: flex"][style*="margin-bottom"] {
        font-size: 10px !important;
        margin-bottom: 12px !important;
    }

    form>div[style*="display: flex"] div[style*="width: 28px"] {
        width: 20px !important;
        height: 20px !important;
    }

    /* Section headers - compact on mobile */
    [style*="padding: 24px 32px"],
    [style*="padding: 28px"] {
        padding: 16px !important;
    }

    /* Header banner - more compact */
    [style*="border-radius: 20px"][style*="padding: 40px"] {
        padding: 20px !important;
        margin-bottom: 20px !important;
    }

    [style*="border-radius: 20px"][style*="padding: 40px"] h2 {
        font-size: 1.25rem !important;
    }

    [style*="border-radius: 20px"][style*="padding: 40px"] p {
        font-size: 0.85rem !important;
        margin-top: 4px !important;
    }

    /* Header icon - smaller */
    [style*="width: 72px"][style*="height: 72px"] {
        width: 48px !important;
        height: 48px !important;
    }

    [style*="width: 72px"][style*="height: 72px"] i {
        width: 24px !important;
        height: 24px !important;
    }

    /* Section card header - compact */
    [style*="padding: 24px 32px"][style*="border-bottom"] {
        padding: 14px 16px !important;
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 8px !important;
    }

    [style*="padding: 24px 32px"][style*="border-bottom"]>div:last-child {
        display: none !important;
    }

    /* Filter dropdowns - full width */
    .filter-grid {
        grid-template-columns: 1fr !important;
    }

    .filter-buttons {
        grid-column: span 1 !important;
        grid-template-columns: 1fr !important;
    }

    /* ========== TABLE IMPROVEMENTS ========== */
    /* Match "Santri Menunggak" table style */

    /* ONLY table wrapper with explicit overflow-x gets scroll */
    [style*="overflow-x: auto"]:has(> table) {
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }

    /* Table container card - don't break layout */
    [style*="border-radius"][style*="box-shadow"]:has(> [style*="overflow-x"]) {
        padding: 8px !important;
    }

    /* Table base styling - FORCE SCROLL */
    table {
        font-size: 11px !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        min-width: 550px !important;
        width: max-content !important;
    }



    /* Table header */
    table thead tr {
        background: #f8fafc !important;
    }

    table th {
        padding: 10px 8px !important;
        font-size: 10px !important;
        font-weight: 700 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.3px !important;
        color: #64748b !important;
        white-space: nowrap !important;
        border-bottom: 2px solid #e2e8f0 !important;
    }

    /* Table cells */
    table td {
        padding: 10px 8px !important;
        font-size: 11px !important;
        vertical-align: middle !important;
        border-bottom: 1px solid #f1f5f9 !important;
    }

    /* Table row hover */
    table tbody tr:hover {
        background: #f8fafc !important;
    }

    /* Name column - bold */
    table td:first-child {
        font-weight: 600 !important;
        color: #1e293b !important;
    }

    /* Action buttons in table - larger touch targets */
    table td button,
    table td a[style*="padding"] {
        min-width: 32px !important;
        min-height: 32px !important;
        padding: 6px !important;
    }

    /* Action button container */
    table td [style*="display: flex"][style*="gap"] {
        gap: 6px !important;
    }

    /* ========== HEADER BANNER ========== */
    /* Compact on small screens */

    [style*="gradient"][style*="padding: 40px"],
    [style*="gradient"][style*="padding: 32px"] {
        padding: 20px 16px !important;
        margin-bottom: 16px !important;
    }

    [style*="gradient"] h2 {
        font-size: 1.25rem !important;
    }

    [style*="gradient"] p {
        font-size: 0.8rem !important;
    }

    /* Hide decorative elements */
    [style*="position: absolute"][style*="opacity"] {
        display: none !important;
    }

    /* ========== SECTION HEADERS ========== */

    [style*="padding: 24px 32px"],
    [style*="padding: 24px"][style*="border-bottom"] {
        padding: 16px !important;
    }

    /* Section title */
    h3[style*="font-size: 1.25rem"],
    [style*="font-size: 1.25rem"][style*="font-weight"] {
        font-size: 1rem !important;
    }

    /* ========== MISC IMPROVEMENTS ========== */

    /* Status badges - slightly larger */
    [style*="border-radius: 9999px"][style*="padding: 6px"] {
        padding: 5px 10px !important;
        font-size: 10px !important;
    }

    /* Alert messages */
    [style*="border-left: 4px"] {
        padding: 12px !important;
        font-size: 13px !important;
    }

    [style*="border-left: 4px"] span {
        font-size: 13px !important;
    }

    /* ========== COMPACT TABLE MODE ========== */
    /* Show ALL columns but ultra-compact */

    /* Ultra compact cells - fit all columns */
    table th,
    table td {
        padding: 6px 4px !important;
        font-size: 9px !important;
        white-space: nowrap !important;
    }

    /* Ultra compact headers */
    table th {
        font-size: 8px !important;
        letter-spacing: 0 !important;
    }

    /* Santri column - compact with ellipsis */
    table td:first-child {
        max-width: 80px !important;
    }

    table td:first-child>div:first-child {
        font-weight: 600 !important;
        font-size: 9px !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        max-width: 75px !important;
    }

    table td:first-child>div:last-child {
        font-size: 7px !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        max-width: 70px !important;
    }

    /* Periode column - shorter */
    table td:nth-child(2) {
        font-size: 8px !important;
    }

    /* Nominal column - compact */
    table td:nth-child(3) {
        font-size: 8px !important;
    }

    /* Status badge - tiny */
    table td span[style*="border-radius: 9999px"] {
        padding: 2px 5px !important;
        font-size: 7px !important;
    }

    /* Action buttons - tiny */
    table td button,
    table td form button {
        padding: 3px !important;
        min-width: 22px !important;
        min-height: 22px !important;
    }

    table td button i,
    table td form button i {
        width: 10px !important;
        height: 10px !important;
    }

    /* Action column gap */
    table td [style*="display: flex"][style*="gap"] {
        gap: 3px !important;
    }
}